uuid: e972ee9b-3705-4380-9fee-5d2a33e0d531
langcode: en
status: true
dependencies: {  }
id: digital_wires_wireq
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: dpa
label: 'Digital Wires Wireq API'
source:
  plugin: wireq_source
  data_fetcher_plugin: http
  data_parser_plugin: json
  item_selector: entries
  ids:
    urn:
      type: string
  fields:
    -
      name: urn
      selector: urn
    -
      name: wireq_receipt
      selector: _wireq_receipt
    -
      name: created
      selector: version_created
    -
      name: updated
      selector: updated
    -
      name: headline
      selector: headline
    -
      name: article_html
      selector: article_html
    -
      name: associations
      selector: associations
process:
  type:
    plugin: default_value
    default_value: dpa_meldung
  field_dpa_urn: urn
  title: headline
  created:
    plugin: format_date_extended
    source: created
    from_format: 'Y-m-d\TH:i:se'
    to_format: U
  field_date_created:
    plugin: format_date_extended
    source: created
    from_format: 'Y-m-d\TH:i:se'
    to_format: 'Y-m-d\TH:i:s'
  changed:
    plugin: format_date_extended
    source: updated
    from_format: 'Y-m-d\TH:i:s\Z'
    to_format: U
  body/value: article_html
  body/format:
    plugin: default_value
    default_value: basic_html
  field_images:
    plugin: sub_process
    source: associations
    process:
      target_id:
        -
          plugin: extract
          source: renditions
          index:
            - 0
            - url
        -
          plugin: file_import
          destination: 'public://dpa_wireq_images/'
          skip_on_missing_source: TRUE
          id_only: TRUE
        -
          plugin: skip_on_empty
          method: process
        -
          plugin: media_generate
          destination_bundle: image
          destination_field: field_media_image
destination:
  plugin: 'entity:node'
migration_dependencies: null
